import React from 'react'
import styles from './LikeIcon.module.css';
import axios from 'axios';

function LikeIcon({height, width, active, onClick, postId, userId, setPostFunction}) {

    height = height ?? '25px';
    width = width ?? '25px';
    const foregroundColor = 'var(--foreground-color)';
    const backgroundColor = 'var(--background-color)';
    const goldColor = 'var(--gold-color)';

    const handleLike = () => {
      onClick?.();
      if(active){
        axios.patch('/post/unlikePost',{
          userId,
          postId
        }).then((response) => {
            setPostFunction?.(response.data)
        }).catch((error) => {
          console.log(error);
        })
      } else {
        axios.patch('/post/likePost',{
          userId,
          postId
        }).then((response) => {
          setPostFunction?.(response.data)
        }).catch((error) => {
          console.log(error);
        })
      }
    }
  return (
    <div style={{width, height}} onClick={handleLike}>
      <svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g clipPath="url(#clip0_1_2)" className={styles.icon}>
          <mask id="path-1-inside-1_1_2" fill="white">
            <path fillRule="evenodd" clipRule="evenodd" d="M8.00351 52.0105L49.8112 93.8182L87.8182 55.8112L87.79 55.783L92.1886 51.3844C102.684 40.8891 102.684 23.8728 92.1886 13.3774C81.6932 2.88209 64.6769 2.88209 54.1816 13.3774L49.783 17.776L46.0105 14.0035C35.5152 3.50815 18.4988 3.50815 8.00351 14.0035C-2.49183 24.4988 -2.49183 41.5151 8.00351 52.0105Z"/>
          </mask>
          <path d="M49.8112 93.8182L-20.8995 164.529L49.8112 235.24L120.522 164.529L49.8112 93.8182ZM87.8182 55.8112L158.529 126.522L229.24 55.8112L158.529 -14.8995L87.8182 55.8112ZM87.79 55.783L17.0793 -14.9277L-53.6313 55.783L17.0793 126.494L87.79 55.783ZM49.783 17.776L-20.9277 88.4867L49.783 159.197L120.494 88.4867L49.783 17.776ZM120.522 23.1075L78.7142 -18.7002L-62.7072 122.721L-20.8995 164.529L120.522 23.1075ZM17.1075 -14.8995L-20.8995 23.1075L120.522 164.529L158.529 126.522L17.1075 -14.8995ZM17.0793 126.494L17.1075 126.522L158.529 -14.8995L158.501 -14.9277L17.0793 126.494ZM21.4779 -19.3263L17.0793 -14.9277L158.501 126.494L162.899 122.095L21.4779 -19.3263ZM21.4779 84.0881C-7.07918 55.531 -7.07918 9.23083 21.4779 -19.3263L162.899 122.095C212.447 72.5473 212.447 -7.78548 162.899 -57.3332L21.4779 84.0881ZM124.892 84.0881C96.3352 112.645 50.035 112.645 21.4779 84.0881L162.899 -57.3332C113.351 -106.881 33.0187 -106.881 -16.5291 -57.3332L124.892 84.0881ZM120.494 88.4867L124.892 84.0881L-16.5291 -57.3332L-20.9277 -52.9347L120.494 88.4867ZM-24.7002 84.7142L-20.9277 88.4867L120.494 -52.9347L116.721 -56.7072L-24.7002 84.7142ZM78.7142 84.7142C50.1571 113.271 3.85691 113.271 -24.7002 84.7142L116.721 -56.7072C67.1734 -106.255 -13.1594 -106.255 -62.7072 -56.7072L78.7142 84.7142ZM78.7142 -18.7002C107.271 9.85689 107.271 56.1571 78.7142 84.7142L-62.7072 -56.7072C-112.255 -7.15941 -112.255 73.1734 -62.7072 122.721L78.7142 -18.7002Z" fill={active ? goldColor : backgroundColor} mask="url(#path-1-inside-1_1_2)" className={styles.fill} />
          <mask id="path-3-inside-2_1_2" fill="white">
            <path fillRule="evenodd" clipRule="evenodd" d="M8.00351 52.0105L49.8112 93.8182L87.8182 55.8112L87.79 55.783L92.1886 51.3844C102.684 40.8891 102.684 23.8728 92.1886 13.3774C81.6932 2.88209 64.6769 2.88209 54.1816 13.3774L49.783 17.776L46.0105 14.0035C35.5152 3.50815 18.4988 3.50815 8.00351 14.0035C-2.49183 24.4988 -2.49183 41.5151 8.00351 52.0105Z"/>
          </mask>
          <path d="M49.8112 93.8182L42.7401 100.889L49.8112 107.96L56.8823 100.889L49.8112 93.8182ZM87.8182 55.8112L94.8893 62.8822L101.96 55.8112L94.8893 48.7401L87.8182 55.8112ZM87.79 55.783L80.7189 48.7119L73.6479 55.783L80.7189 62.8541L87.79 55.783ZM49.783 17.776L42.7119 24.8471L49.783 31.9181L56.8541 24.8471L49.783 17.776ZM56.8823 86.7471L15.0746 44.9394L0.932442 59.0816L42.7401 100.889L56.8823 86.7471ZM80.7471 48.7401L42.7401 86.7471L56.8823 100.889L94.8893 62.8822L80.7471 48.7401ZM80.7189 62.8541L80.7471 62.8822L94.8893 48.7401L94.8611 48.7119L80.7189 62.8541ZM85.1175 44.3133L80.7189 48.7119L94.8611 62.8541L99.2597 58.4555L85.1175 44.3133ZM85.1175 20.4485C91.7076 27.0386 91.7076 37.7233 85.1175 44.3133L99.2597 58.4555C113.66 44.0549 113.66 20.7069 99.2597 6.30636L85.1175 20.4485ZM61.2527 20.4485C67.8428 13.8584 78.5274 13.8584 85.1175 20.4485L99.2597 6.30636C84.8591 -8.09422 61.5111 -8.09422 47.1105 6.30636L61.2527 20.4485ZM56.8541 24.8471L61.2527 20.4485L47.1105 6.30636L42.7119 10.7049L56.8541 24.8471ZM38.9394 21.0746L42.7119 24.8471L56.8541 10.7049L53.0816 6.93243L38.9394 21.0746ZM15.0746 21.0746C21.6647 14.4845 32.3493 14.4845 38.9394 21.0746L53.0816 6.93243C38.681 -7.46816 15.333 -7.46816 0.932442 6.93243L15.0746 21.0746ZM15.0746 44.9394C8.48448 38.3493 8.48448 27.6647 15.0746 21.0746L0.932442 6.93243C-13.4681 21.333 -13.4681 44.681 0.932442 59.0816L15.0746 44.9394Z" fill={active ? goldColor : foregroundColor} mask="url(#path-3-inside-2_1_2)" className={styles.stroke}/>
          </g>
      </svg>
    </div>
  )
}

export default LikeIcon;